# Some tools to interact with your VM

This document summarizes some convenient methods to access and interact with your VM.

First of all, you need some information from your system admin:
- Since you are connected to the VMs' subnet through the Headscale server on the bastion VM, the system admin must tell you **the IP address of your VM on this subnet** in order to connect to it.
- Also, the system admin should have created an account for you on the VM. You must know **the username of your VM account** to access it (as for the password, you will set your own upon first login).

## Connection checks

**Keep in mind that you must have a functioning connection to the Headscale server of the bastion VM in order to connect to your VM.** You can always check the connection to the host of your bastion VM (or to the bastion itself, depending on the specific network configuration of the machine) by pinging its IP address. For example:
```bash
ping 10.79.40.10
```
If this works, it means that your PC is correctly connected to Politecnico's local network. Then, you can try to reach the bastion VM using its IP address on the subnet exposed by the Headscale server running on the bastion itself. Usually, the bastion is located in the xxx.xxx.xxx.2 position, so:
```bash
ping 192.168.100.2
```
Finally, you can attempt reaching your own VM by using its IP address on the subnet exposed by the Headscale server. For example:
```bash
ping 192.168.100.3
```
If this works, it means that your VM is up and running, and you can access it using the means you prefer (e.g., SSH, NoMachine, SFTP). If the others above work, but not the last ping instruction, it's very likely that your VM is off. Depending on the specific server configuration, you might either need to ask your system admin to turn it on or connect to the Proxmox host and turn it on yourself.

---

## List of suggested tools to access and work with your VM

- **[NoMachine](https://www.nomachine.com/it/):** A remote desktop connection client relying on the NX protocol, which is more powerful, secure, and easier to configure than RDP or VNC connections. Your VM comes with the NoMachine server pre-installed, so you just need to [download](https://download.nomachine.com/it/everybody/) the appropriate version for your device (_the client_) to connect to your VM (_the host_). It's available even on Android and iPad, so I couldn't recommend this tool more! Its usage is straightforward, but [here](https://youtu.be/aMYU_cq_zoo) you can find a brief tutorial where I explain the main functionalities of NoMachine, WinSCP (see the next bullet), and some basics of how you should manage your files on the Linux VM to quickly get started (if you are a total noob with Linux, which is **_unacceptable_**! :triumph: ). The tutorial is in Italian but subtitled in English. It is very pragmatic, so don't focus on appearances, please! :pray: Also, leave a comment if you find anything unclear or have suggestions that might interest others.
- **[WinSCP](https://winscp.net/eng/download.php):** If you are a Windows user, this is the best GUI-based **SFTP** client I've ever found to enable easy exchange of files between a Linux system (your VM, in this case) and your PC. Its functioning is briefly explained in the same YouTube video linked above. This tool is **very straightforward and convenient if you need to transfer only a few and not-too-big files**. If you need to transfer large files (from a few GBs up) from and to your VM, I recommend **[FileZilla](https://filezilla-project.org/)**, which has a reliable _resume upload/download_ function enabling restarting the file transfer from the last exchanged part in case your connection drops. You should prefer the same tool also if you need to transfer an enormous amount of small files (like thousands or more): zip them, then transfer the zip file using FileZilla or WinSCP, depending on its final size.
- **SFTP:** If your client PC is on macOS or Linux, SFTP connections should work out of the box, with tools embedded in the respective file managers. You don't need to install anything else if all you need are WinSCP-like capabilities. Conversely, if you need _resume transfer_ or advanced connection options, you can still install **FileZilla** on both macOS and Linux (from the official repositories, so very easily) if you prefer a GUI-based approach, or **rsync**, which is available only for Linux (as far as I know) and is very powerful, as it allows also performing folder synchronization tasks, showing progress during file transfers (`--progress` flag), and performing compression to speed up transfer of large files (`-z` flag).
- **[FreeFileSync](https://freefilesync.org/):** Speaking of _folder synchronization_, this tool is beautiful and priceless to keep one folder (or a set of folders) in your local PC synchronized with one folder on your VM. It is free (obviously), open source, available for all platforms, comes with an extremely functional GUI, and supports SFTP and SMB file transfers out of the box! This is another tool I couldn't recommend more. :heart:
- **SSH:** This is the recommended method if you prefer to interact with your VM by command line. **Note that if your SSH connection drops while you are doing something interactively or launching a process, getting access back to that session is, generally, impossible or very complex.** If you use SSH connections regularly, you should rely on **_tmux_** (highly recommended, [here's](https://youtu.be/nTqu6w2wc68?si=cmYW0IG2nsWHLBf9) a wonderful and efficient tutorial on it) or _screen_ to avoid this problem.
- **rclone:** Do you need to transfer files from and to your cloud provider? Just install and configure _rclone_ on your VM (e.g., [here's](https://rclone.org/onedrive/) the step-by-step procedure with OneDrive)! It is readily available in the official repositories of most Linux distros, enabling installation with a single command (e.g., on Ubuntu: `sudo apt-get update && sudo apt-get install rclone`).
- **Visual Studio Code**: VS Code has an excellent SSH-based (?) server that allows a client VS Code application (on your PC) to interact with a VS Code installation on the host (your VM, in this case). The reliability and capabilities of this connection are amazing: you can even connect to virtual environments installed on the VM or execute your code on containers available in the VM. Of course, all the processes launched through the VS Code server will be executed on the VM (even if it will feel like you are executing them locally, given how the connection is flawless!). I'm not sure of what happens if you launch a Python script and your connection drops unexpectedly, though. Thus, if you need to launch a long-lasting process, it's probably better to rely on SSH (with _tmux_ or _screen_, as already mentioned) or NoMachine to start the process from within the VM desktop. VS Code should come pre-installed in your VM, so all you need to do is set up VS Code on your PC and connect to the VS Code server on the VM through the proper plugin. This process is very simple, but you can find a few indications here.
